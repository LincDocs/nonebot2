import{_ as a,e as t,g as s,f as l,h as n,i as p,j as r,r as o,o as h}from"./app-DlBE6PBf.js";const d={};function k(g,i){const e=o("RouteLink");return h(),t("div",null,[i[5]||(i[5]=s("h1",{id:"嵌套插件",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#嵌套插件"},[s("span",null,"嵌套插件")])],-1)),i[6]||(i[6]=s("p",null,"NoneBot 支持嵌套插件，即一个插件可以包含其他插件。通过这种方式，我们可以将一个大型插件拆分成多个功能子插件，使得插件更加清晰、易于维护。我们可以直接在插件中使用 NoneBot 加载插件的方法来加载子插件。",-1)),i[7]||(i[7]=s("h2",{id:"创建嵌套插件",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#创建嵌套插件"},[s("span",null,"创建嵌套插件")])],-1)),s("p",null,[i[1]||(i[1]=n("我们可以在使用 ")),i[2]||(i[2]=s("code",null,"nb-cli",-1)),i[3]||(i[3]=n(" 命令")),p(e,{to:"/version-2.4.1/tutorial/create-plugin.html#%E5%88%9B%E5%BB%BA%E6%8F%92%E4%BB%B6"},{default:r(()=>i[0]||(i[0]=[n("创建插件")])),_:1}),i[4]||(i[4]=n("时，选择直接通过模板创建一个嵌套插件："))]),i[8]||(i[8]=l(`<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> plugin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[?] 插件名称: parent</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[?] 使用嵌套插件? (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">y/N</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) Y</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[?] 输出目录: awesome_bot/plugins</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者使用 <code>nb plugin create --sub-plugin</code> 选项直接创建一个嵌套插件。</p><h2 id="已有插件" tabindex="-1"><a class="header-anchor" href="#已有插件"><span>已有插件</span></a></h2><p>如果你已经有一个插件，想要在其中嵌套加载子插件，可以在插件的 <code>__init__.py</code> 中添加如下代码：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nonebot</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pathlib </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Path</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sub_plugins </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nonebot.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">load_plugins</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    str</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">__file__</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).parent.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">joinpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;plugins&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样，<code>parent</code> 插件就会加载 <code>parent/plugins</code> 目录下的所有插件。NoneBot 会正确识别这些插件的父子关系，你可以在 <code>parent</code> 的插件信息中看到这些子插件的信息，也可以在子插件信息中看到它们的父插件信息。</p>`,6))])}const u=a(d,[["render",k],["__file","plugin-nesting.html.vue"]]),B=JSON.parse('{"path":"/version-2.4.1/advanced/plugin-nesting.html","title":"嵌套插件","lang":"zh-CN","frontmatter":{"sidebar_position":3,"description":"编写与加载嵌套插件","options":{"menu":[{"category":"advanced","weight":40}]},"head":[["meta",{"property":"og:url","content":"https://LincDocs.github.io/nonebot2/version-2.4.1/advanced/plugin-nesting.html"}],["meta",{"property":"og:site_name","content":"nonebot2"}],["meta",{"property":"og:title","content":"嵌套插件"}],["meta",{"property":"og:description","content":"编写与加载嵌套插件"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"嵌套插件\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincDocs\\",\\"url\\":\\"https://github.com/LincDocs/nonebot2/\\"}]}"]]},"git":{},"readingTime":{"minutes":1.08,"words":325},"filePathRelative":"version-2.4.1/advanced/plugin-nesting.md","excerpt":"\\n<p>NoneBot 支持嵌套插件，即一个插件可以包含其他插件。通过这种方式，我们可以将一个大型插件拆分成多个功能子插件，使得插件更加清晰、易于维护。我们可以直接在插件中使用 NoneBot 加载插件的方法来加载子插件。</p>\\n<h2>创建嵌套插件</h2>\\n<p>我们可以在使用 <code>nb-cli</code> 命令<a href=\\"/nonebot2/version-2.4.1/tutorial/create-plugin.html#%E5%88%9B%E5%BB%BA%E6%8F%92%E4%BB%B6\\" target=\\"_blank\\">创建插件</a>时，选择直接通过模板创建一个嵌套插件：</p>","bioChainData":{"outlink":[{"title":"create-plugin","link":"version-2.4.1/tutorial/create-plugin.html"}],"backlink":[{"title":"create-plugin","link":"version-2.4.1/tutorial/create-plugin.html"}],"localMap":{"nodes":[{"id":"version-2.4.1/advanced/plugin-nesting.md","value":{"title":"plugin-nesting","path":"version-2.4.1/advanced/plugin-nesting.md","outlink":["version-2.4.1/tutorial/create-plugin.md"],"backlink":["version-2.4.1/tutorial/create-plugin.md"]}},{"id":"version-2.4.1/tutorial/create-plugin.md","value":{"title":"create-plugin","path":"version-2.4.1/tutorial/create-plugin.md","outlink":[],"backlink":[]}}],"links":[{"source":"version-2.4.1/advanced/plugin-nesting.md","target":"version-2.4.1/tutorial/create-plugin.md"},{"source":"version-2.4.1/tutorial/create-plugin.md","target":"version-2.4.1/advanced/plugin-nesting.md"}]}}}');export{u as comp,B as data};
