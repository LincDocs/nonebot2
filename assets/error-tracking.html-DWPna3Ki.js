import{_ as t,e as n,f as i,o as r}from"./app-B_YPxGo4.js";const o={};function s(a,e){return r(),n("div",null,e[0]||(e[0]=[i('<h1 id="错误跟踪" tabindex="-1"><a class="header-anchor" href="#错误跟踪"><span>错误跟踪</span></a></h1><p>在应用实际运行过程中，可能会出现各种各样的错误。可能是由于代码逻辑错误，也可能是由于用户输入错误，甚至是由于第三方服务的错误。这些错误都会导致应用的运行出现问题，这时候就需要对错误进行跟踪，以便及时发现问题并进行修复。NoneBot 提供了 <code>nonebot-plugin-sentry</code> 插件，支持 <a href="https://sentry.io/" target="_blank" rel="noopener noreferrer">sentry</a> 平台，可以方便地进行错误跟踪。</p><h2 id="安装插件" tabindex="-1"><a class="header-anchor" href="#安装插件"><span>安装插件</span></a></h2><p>在使用前请先安装 <code>nonebot-plugin-sentry</code> 插件至项目环境中，可参考<a href="../tutorial/store.mdx#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6">获取商店插件</a>来了解并选择安装插件的方式。如：</p><p>在<strong>项目目录</strong>下执行以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> plugin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nonebot-plugin-sentry</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="使用插件" tabindex="-1"><a class="header-anchor" href="#使用插件"><span>使用插件</span></a></h2><p>在安装完成之后，仅需要对插件进行简单的配置即可使用。</p><h3 id="获取-sentry-dsn" tabindex="-1"><a class="header-anchor" href="#获取-sentry-dsn"><span>获取 sentry DSN</span></a></h3><p>前往 <a href="https://sentry.io/" target="_blank" rel="noopener noreferrer">sentry</a> 平台，注册并创建一个新的项目，然后在项目设置中找到 <code>Client Keys (DSN)</code>，复制其中的 <code>DSN</code> 值。</p><h3 id="配置插件" tabindex="-1"><a class="header-anchor" href="#配置插件"><span>配置插件</span></a></h3><div class="hint-container caution"><p class="hint-container-title">注意</p><p>错误跟踪通常在生产环境中使用，因此开发环境中 <code>sentry_dsn</code> 留空即会停用插件。</p></div><p>在项目 dotenv 配置文件中添加以下配置即可使用：</p><div class="language-dotenv line-numbers-mode" data-highlighter="shiki" data-ext="dotenv" data-title="dotenv" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">SENTRY_DSN</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;your_sentry_dsn&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="配置项" tabindex="-1"><a class="header-anchor" href="#配置项"><span>配置项</span></a></h2><p>配置项具体含义参考 <a href="https://docs.sentry.io/platforms/python/configuration/options/" target="_blank" rel="noopener noreferrer">Sentry Docs</a>。</p><ul><li><code>sentry_dsn: str</code></li><li><code>sentry_debug: bool = False</code></li><li><code>sentry_release: str | None = None</code></li><li><code>sentry_release: str | None = None</code></li><li><code>sentry_environment: str | None = nonebot env</code></li><li><code>sentry_server_name: str | None = None</code></li><li><code>sentry_sample_rate: float = 1.</code></li><li><code>sentry_max_breadcrumbs: int = 100</code></li><li><code>sentry_attach_stacktrace: bool = False</code></li><li><code>sentry_send_default_pii: bool = False</code></li><li><code>sentry_in_app_include: List[str] = Field(default_factory=list)</code></li><li><code>sentry_in_app_exclude: List[str] = Field(default_factory=list)</code></li><li><code>sentry_request_bodies: str = &quot;medium&quot;</code></li><li><code>sentry_with_locals: bool = True</code></li><li><code>sentry_ca_certs: str | None = None</code></li><li><code>sentry_before_send: Callable[[Any, Any], Any | None] | None = None</code></li><li><code>sentry_before_breadcrumb: Callable[[Any, Any], Any | None] | None = None</code></li><li><code>sentry_transport: Any | None = None</code></li><li><code>sentry_http_proxy: str | None = None</code></li><li><code>sentry_https_proxy: str | None = None</code></li><li><code>sentry_shutdown_timeout: int = 2</code></li></ul>',17)]))}const d=t(o,[["render",s],["__file","error-tracking.html.vue"]]),c=JSON.parse('{"path":"/version-2.4.1/best-practice/error-tracking.html","title":"错误跟踪","lang":"zh-CN","frontmatter":{"sidebar_position":2,"description":"使用 sentry 进行错误跟踪","head":[["meta",{"property":"og:url","content":"https://LincDocs.github.io/nonebot2/version-2.4.1/best-practice/error-tracking.html"}],["meta",{"property":"og:site_name","content":"nonebot2"}],["meta",{"property":"og:title","content":"错误跟踪"}],["meta",{"property":"og:description","content":"使用 sentry 进行错误跟踪"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"错误跟踪\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LincDocs\\",\\"url\\":\\"https://github.com/LincDocs/nonebot2/\\"}]}"]]},"git":{},"readingTime":{"minutes":1.49,"words":446},"filePathRelative":"version-2.4.1/best-practice/error-tracking.md","excerpt":"\\n<p>在应用实际运行过程中，可能会出现各种各样的错误。可能是由于代码逻辑错误，也可能是由于用户输入错误，甚至是由于第三方服务的错误。这些错误都会导致应用的运行出现问题，这时候就需要对错误进行跟踪，以便及时发现问题并进行修复。NoneBot 提供了 <code>nonebot-plugin-sentry</code> 插件，支持 <a href=\\"https://sentry.io/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">sentry</a> 平台，可以方便地进行错误跟踪。</p>\\n<h2>安装插件</h2>\\n<p>在使用前请先安装 <code>nonebot-plugin-sentry</code> 插件至项目环境中，可参考<a href=\\"../tutorial/store.mdx#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6\\">获取商店插件</a>来了解并选择安装插件的方式。如：</p>","bioChainData":{"outlink":[],"backlink":[],"localMap":{"nodes":[{"id":"version-2.4.1/best-practice/error-tracking.md","value":{"title":"error-tracking","path":"version-2.4.1/best-practice/error-tracking.md","outlink":[],"backlink":[]}}],"links":[]}}}');export{d as comp,c as data};
