import{k as W,u as X,l as M,m as Z,y as ee,t as se,n as ie,p as C,q as w,v as i,x as te,w as re,z as ae,R as I,A as ne,B as oe,D as le,E as ve,F as ce,G as T,H as $,J as pe,K as me,L as he,M as ue,N as de,O as ge,Q as ye,S as be,T as U,U as fe,V as _}from"./app-Mt0-3WUT.js";const ke=["/version-2.4.0/","/version-2.4.0/editor-support.html","/version-2.4.2/","/version-2.4.2/editor-support.html","/version-2.4.1/","/version-2.4.1/editor-support.html","/version-2.4.0/advanced/adapter.html","/version-2.4.0/advanced/driver.html","/version-2.4.0/advanced/matcher-provider.html","/version-2.4.0/advanced/matcher.html","/version-2.4.0/advanced/plugin-info.html","/version-2.4.0/advanced/plugin-nesting.html","/version-2.4.0/advanced/requiring.html","/version-2.4.0/advanced/routing.html","/version-2.4.0/advanced/runtime-hook.html","/version-2.4.0/advanced/session-updating.html","/version-2.4.0/api/compat.html","/version-2.4.0/api/config.html","/version-2.4.0/api/consts.html","/version-2.4.0/api/exception.html","/version-2.4.0/api/","/version-2.4.0/api/log.html","/version-2.4.0/api/matcher.html","/version-2.4.0/api/message.html","/version-2.4.0/api/params.html","/version-2.4.0/api/permission.html","/version-2.4.0/api/rule.html","/version-2.4.0/api/typing.html","/version-2.4.0/api/utils.html","/version-2.4.0/appendices/log.html","/version-2.4.0/appendices/overload.html","/version-2.4.0/appendices/rule.html","/version-2.4.0/appendices/session-state.html","/version-2.4.0/appendices/whats-next.html","/version-2.4.0/best-practice/data-storing.html","/version-2.4.0/best-practice/error-tracking.html","/version-2.4.0/best-practice/scheduler.html","/version-2.4.0/community/contact.html","/version-2.4.0/community/contributing.html","/version-2.4.0/developer/adapter-writing.html","/version-2.4.0/ospp/2021.html","/version-2.4.0/ospp/2022.html","/version-2.4.0/ospp/2023.html","/version-2.4.0/ospp/2024.html","/version-2.4.0/tutorial/application.html","/version-2.4.0/tutorial/create-plugin.html","/version-2.4.0/tutorial/fundamentals.html","/version-2.4.0/tutorial/matcher.html","/version-2.4.0/tutorial/message.html","/version-2.4.2/advanced/adapter.html","/version-2.4.2/advanced/driver.html","/version-2.4.2/advanced/matcher-provider.html","/version-2.4.2/advanced/matcher.html","/version-2.4.2/advanced/plugin-info.html","/version-2.4.2/advanced/plugin-nesting.html","/version-2.4.2/advanced/requiring.html","/version-2.4.2/advanced/routing.html","/version-2.4.2/advanced/runtime-hook.html","/version-2.4.2/advanced/session-updating.html","/version-2.4.2/api/compat.html","/version-2.4.2/api/config.html","/version-2.4.2/api/consts.html","/version-2.4.2/api/exception.html","/version-2.4.2/api/","/version-2.4.2/api/log.html","/version-2.4.2/api/matcher.html","/version-2.4.2/api/message.html","/version-2.4.2/api/params.html","/version-2.4.2/api/permission.html","/version-2.4.2/api/rule.html","/version-2.4.2/api/typing.html","/version-2.4.2/api/utils.html","/version-2.4.2/appendices/log.html","/version-2.4.2/appendices/overload.html","/version-2.4.2/appendices/rule.html","/version-2.4.2/appendices/session-state.html","/version-2.4.2/appendices/whats-next.html","/version-2.4.2/best-practice/data-storing.html","/version-2.4.2/best-practice/error-tracking.html","/version-2.4.2/best-practice/scheduler.html","/version-2.4.2/community/contact.html","/version-2.4.2/community/contributing.html","/version-2.4.2/developer/adapter-writing.html","/version-2.4.2/ospp/2021.html","/version-2.4.2/ospp/2022.html","/version-2.4.2/ospp/2023.html","/version-2.4.2/ospp/2024.html","/version-2.4.2/tutorial/application.html","/version-2.4.2/tutorial/create-plugin.html","/version-2.4.2/tutorial/fundamentals.html","/version-2.4.2/tutorial/matcher.html","/version-2.4.2/tutorial/message.html","/version-2.4.1/advanced/adapter.html","/version-2.4.1/advanced/driver.html","/version-2.4.1/advanced/matcher-provider.html","/version-2.4.1/advanced/matcher.html","/version-2.4.1/advanced/plugin-info.html","/version-2.4.1/advanced/plugin-nesting.html","/version-2.4.1/advanced/requiring.html","/version-2.4.1/advanced/routing.html","/version-2.4.1/advanced/runtime-hook.html","/version-2.4.1/advanced/session-updating.html","/version-2.4.1/api/compat.html","/version-2.4.1/api/config.html","/version-2.4.1/api/consts.html","/version-2.4.1/api/exception.html","/version-2.4.1/api/","/version-2.4.1/api/log.html","/version-2.4.1/api/matcher.html","/version-2.4.1/api/message.html","/version-2.4.1/api/params.html","/version-2.4.1/api/permission.html","/version-2.4.1/api/rule.html","/version-2.4.1/api/typing.html","/version-2.4.1/api/utils.html","/version-2.4.1/appendices/log.html","/version-2.4.1/appendices/overload.html","/version-2.4.1/appendices/rule.html","/version-2.4.1/appendices/session-state.html","/version-2.4.1/appendices/whats-next.html","/version-2.4.1/best-practice/data-storing.html","/version-2.4.1/best-practice/error-tracking.html","/version-2.4.1/best-practice/scheduler.html","/version-2.4.1/community/contact.html","/version-2.4.1/community/contributing.html","/version-2.4.1/developer/adapter-writing.html","/version-2.4.1/ospp/2021.html","/version-2.4.1/ospp/2022.html","/version-2.4.1/ospp/2023.html","/version-2.4.1/ospp/2024.html","/version-2.4.1/tutorial/application.html","/version-2.4.1/tutorial/create-plugin.html","/version-2.4.1/tutorial/fundamentals.html","/version-2.4.1/tutorial/matcher.html","/version-2.4.1/tutorial/message.html","/version-2.4.0/api/adapters/","/version-2.4.0/api/dependencies/","/version-2.4.0/api/dependencies/utils.html","/version-2.4.0/api/drivers/aiohttp.html","/version-2.4.0/api/drivers/fastapi.html","/version-2.4.0/api/drivers/httpx.html","/version-2.4.0/api/drivers/","/version-2.4.0/api/drivers/none.html","/version-2.4.0/api/drivers/quart.html","/version-2.4.0/api/drivers/websockets.html","/version-2.4.0/api/plugin/","/version-2.4.0/api/plugin/load.html","/version-2.4.0/api/plugin/manager.html","/version-2.4.0/api/plugin/model.html","/version-2.4.0/api/plugin/on.html","/version-2.4.0/best-practice/alconna/command.html","/version-2.4.0/best-practice/alconna/config.html","/version-2.4.0/best-practice/database/user.html","/version-2.4.0/best-practice/testing/mock-network.html","/version-2.4.2/api/adapters/","/version-2.4.2/api/dependencies/","/version-2.4.2/api/dependencies/utils.html","/version-2.4.2/api/drivers/aiohttp.html","/version-2.4.2/api/drivers/fastapi.html","/version-2.4.2/api/drivers/httpx.html","/version-2.4.2/api/drivers/","/version-2.4.2/api/drivers/none.html","/version-2.4.2/api/drivers/quart.html","/version-2.4.2/api/drivers/websockets.html","/version-2.4.2/api/plugin/","/version-2.4.2/api/plugin/load.html","/version-2.4.2/api/plugin/manager.html","/version-2.4.2/api/plugin/model.html","/version-2.4.2/api/plugin/on.html","/version-2.4.2/best-practice/alconna/command.html","/version-2.4.2/best-practice/alconna/config.html","/version-2.4.2/best-practice/database/user.html","/version-2.4.2/best-practice/testing/mock-network.html","/version-2.4.1/api/adapters/","/version-2.4.1/api/dependencies/","/version-2.4.1/api/dependencies/utils.html","/version-2.4.1/api/drivers/aiohttp.html","/version-2.4.1/api/drivers/fastapi.html","/version-2.4.1/api/drivers/httpx.html","/version-2.4.1/api/drivers/","/version-2.4.1/api/drivers/none.html","/version-2.4.1/api/drivers/quart.html","/version-2.4.1/api/drivers/websockets.html","/version-2.4.1/api/plugin/","/version-2.4.1/api/plugin/load.html","/version-2.4.1/api/plugin/manager.html","/version-2.4.1/api/plugin/model.html","/version-2.4.1/api/plugin/on.html","/version-2.4.1/best-practice/alconna/command.html","/version-2.4.1/best-practice/alconna/config.html","/version-2.4.1/best-practice/database/user.html","/version-2.4.1/best-practice/testing/mock-network.html","/version-2.4.0/best-practice/database/developer/","/version-2.4.0/best-practice/database/developer/dependency.html","/version-2.4.0/best-practice/database/developer/test.html","/version-2.4.2/best-practice/database/developer/","/version-2.4.2/best-practice/database/developer/dependency.html","/version-2.4.2/best-practice/database/developer/test.html","/version-2.4.1/best-practice/database/developer/","/version-2.4.1/best-practice/database/developer/dependency.html","/version-2.4.1/best-practice/database/developer/test.html","/version-2.4.0/api/adapters/category_.json.html","/version-2.4.0/api/dependencies/category_.json.html","/version-2.4.0/api/drivers/category_.json.html","/version-2.4.0/api/plugin/category_.json.html","/version-2.4.0/best-practice/alconna/category_.json.html","/version-2.4.0/best-practice/database/category_.json.html","/version-2.4.0/best-practice/testing/category_.json.html","/version-2.4.1/api/adapters/category_.json.html","/version-2.4.1/api/dependencies/category_.json.html","/version-2.4.1/api/drivers/category_.json.html","/version-2.4.1/api/plugin/category_.json.html","/version-2.4.1/best-practice/alconna/category_.json.html","/version-2.4.1/best-practice/database/category_.json.html","/version-2.4.1/best-practice/testing/category_.json.html","/version-2.4.2/api/adapters/category_.json.html","/version-2.4.2/api/dependencies/category_.json.html","/version-2.4.2/api/drivers/category_.json.html","/version-2.4.2/api/plugin/category_.json.html","/version-2.4.2/best-practice/alconna/category_.json.html","/version-2.4.2/best-practice/database/category_.json.html","/version-2.4.2/best-practice/testing/category_.json.html","/version-2.4.0/best-practice/database/developer/category_.json.html","/version-2.4.1/best-practice/database/developer/category_.json.html","/version-2.4.2/best-practice/database/developer/category_.json.html","/404.html","/","/version-2.4.0/advanced/","/version-2.4.0/appendices/","/version-2.4.0/best-practice/","/version-2.4.0/community/","/version-2.4.0/developer/","/version-2.4.0/ospp/","/version-2.4.0/tutorial/","/version-2.4.2/advanced/","/version-2.4.2/appendices/","/version-2.4.2/best-practice/","/version-2.4.2/community/","/version-2.4.2/developer/","/version-2.4.2/ospp/","/version-2.4.2/tutorial/","/version-2.4.1/advanced/","/version-2.4.1/appendices/","/version-2.4.1/best-practice/","/version-2.4.1/community/","/version-2.4.1/developer/","/version-2.4.1/ospp/","/version-2.4.1/tutorial/","/version-2.4.0/best-practice/alconna/","/version-2.4.0/best-practice/database/","/version-2.4.0/best-practice/testing/","/version-2.4.2/best-practice/alconna/","/version-2.4.2/best-practice/database/","/version-2.4.2/best-practice/testing/","/version-2.4.1/best-practice/alconna/","/version-2.4.1/best-practice/database/","/version-2.4.1/best-practice/testing/","/category/","/tag/","/Blog/","/star/","/timeline/"],je="SLIMSEARCH_QUERY_HISTORY",g=U(je,[]),we=()=>{const{queryHistoryCount:r}=_;return{enabled:r>0,queryHistories:g,addQueryHistory:o=>{g.value=Array.from(new Set([o,...g.value.slice(0,r-1)]))},removeQueryHistory:o=>{g.value=[...g.value.slice(0,o),...g.value.slice(o+1)]}}},L=r=>ke[r.id]+("anchor"in r?`#${r.anchor}`:""),_e="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:F}=_,y=U(_e,[]),xe=()=>({enabled:F>0,resultHistories:y,addResultHistory:n=>{{const o={link:L(n),display:n.display};"header"in n&&(o.header=n.header),y.value=[o,...y.value.slice(0,F-1)]}},removeResultHistory:n=>{y.value=[...y.value.slice(0,n),...y.value.slice(n+1)]}}),He=r=>{const n=pe(),o=M(),x=me(),l=C(0),b=w(()=>l.value>0),p=he([]);return ue(()=>{const{search:H,terminate:h}=de(),f=ye(u=>{const{resultsFilter:q=t=>t,querySplitter:d,suggestionsFilter:D,...a}=n.value;u?(l.value+=1,H(u,o.value,a).then(t=>q(t,u,o.value,x.value)).then(t=>{l.value-=1,p.value=t}).catch(t=>{console.warn(t),l.value-=1,l.value||(p.value=[])})):p.value=[]},_.searchDelay-_.suggestDelay,{maxWait:5e3});ge([r,o],([u])=>f(u.join(" "))),be(()=>{h()})}),{isSearching:b,results:p}};var Re=W({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(r,{emit:n}){const o=X(),x=M(),l=Z(ee),{addQueryHistory:b,queryHistories:p,removeQueryHistory:H}=we(),{resultHistories:h,addResultHistory:f,removeResultHistory:u}=xe(),q=se(r,"queries"),{results:d,isSearching:D}=He(q),a=ie({isQuery:!0,index:0}),t=C(0),m=C(0),A=w(()=>p.value.length>0||h.value.length>0),R=w(()=>d.value.length>0),Q=w(()=>d.value[t.value]||null),O=()=>{const{isQuery:e,index:s}=a;s===0?(a.isQuery=!e,a.index=e?h.value.length-1:p.value.length-1):a.index=s-1},P=()=>{const{isQuery:e,index:s}=a;s===(e?p.value.length-1:h.value.length-1)?(a.isQuery=!e,a.index=0):a.index=s+1},B=()=>{t.value=t.value>0?t.value-1:d.value.length-1,m.value=Q.value.contents.length-1},Y=()=>{t.value=t.value<d.value.length-1?t.value+1:0,m.value=0},V=()=>{m.value<Q.value.contents.length-1?m.value+=1:Y()},z=()=>{m.value>0?m.value-=1:B()},S=e=>e.map(s=>fe(s)?s:i(s[0],s[1])),G=e=>{if(e.type==="customField"){const s=ve[e.index]||"$content",[v,j=""]=ce(s)?s[x.value].split("$content"):s.split("$content");return e.display.map(c=>i("div",S([v,...c,j])))}return e.display.map(s=>i("div",S(s)))},k=()=>{t.value=0,m.value=0,n("updateQuery",""),n("close")},J=()=>i("ul",{class:"slimsearch-result-list"},i("li",{class:"slimsearch-result-list-item"},[i("div",{class:"slimsearch-result-title"},l.value.queryHistory),p.value.map((e,s)=>i("div",{class:["slimsearch-result-item",{active:a.isQuery&&a.index===s}],onClick:()=>{n("updateQuery",e)}},[i(T,{class:"slimsearch-result-type"}),i("div",{class:"slimsearch-result-content"},e),i("button",{class:"slimsearch-remove-icon",innerHTML:$,onClick:v=>{v.preventDefault(),v.stopPropagation(),H(s)}})]))])),K=()=>i("ul",{class:"slimsearch-result-list"},i("li",{class:"slimsearch-result-list-item"},[i("div",{class:"slimsearch-result-title"},l.value.resultHistory),h.value.map((e,s)=>i(I,{to:e.link,class:["slimsearch-result-item",{active:!a.isQuery&&a.index===s}],onClick:()=>{k()}},()=>[i(T,{class:"slimsearch-result-type"}),i("div",{class:"slimsearch-result-content"},[e.header?i("div",{class:"content-header"},e.header):null,i("div",e.display.map(v=>S(v)).flat())]),i("button",{class:"slimsearch-remove-icon",innerHTML:$,onClick:v=>{v.preventDefault(),v.stopPropagation(),u(s)}})]))]));return te("keydown",e=>{if(r.isFocusing){if(R.value){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const s=Q.value.contents[m.value];b(r.queries.join(" ")),f(s),o.push(L(s)),k()}}else if(e.key==="ArrowUp")O();else if(e.key==="ArrowDown")P();else if(e.key==="Enter"){const{index:s}=a;a.isQuery?(n("updateQuery",p.value[s]),e.preventDefault()):(o.push(h.value[s].link),k())}}}),re([t,m],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>i("div",{class:["slimsearch-result-wrapper",{empty:r.queries.length?!R.value:!A.value}],id:"slimsearch-results"},r.queries.length?D.value?i(ae,{hint:l.value.searching}):R.value?i("ul",{class:"slimsearch-result-list"},d.value.map(({title:e,contents:s},v)=>{const j=t.value===v;return i("li",{class:["slimsearch-result-list-item",{active:j}]},[i("div",{class:"slimsearch-result-title"},e||l.value.defaultTitle),s.map((c,N)=>{const E=j&&m.value===N;return i(I,{to:L(c),class:["slimsearch-result-item",{active:E,"aria-selected":E}],onClick:()=>{b(r.queries.join(" ")),f(c),k()}},()=>[c.type==="text"?null:i(c.type==="title"?ne:c.type==="heading"?oe:le,{class:"slimsearch-result-type"}),i("div",{class:"slimsearch-result-content"},[c.type==="text"&&c.header?i("div",{class:"content-header"},c.header):null,i("div",G(c))])])})])})):l.value.emptyResult:A.value?[J(),K()]:l.value.emptyHistory)}});export{Re as default};
